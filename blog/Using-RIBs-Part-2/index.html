<!DOCTYPE html><html lang="en"><head><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet"/><script src="https://kit.fontawesome.com/662f6d0c39.js" crossorigin="anonymous"></script><script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/></head><head><meta charset="UTF-8"/><meta name="og:site_name" content="Jihoon.me"/><link rel="canonical" href="https://blog.jihoon.me/blog/Using-RIBs-Part-2"/><meta name="twitter:url" content="https://blog.jihoon.me/blog/Using-RIBs-Part-2"/><meta name="og:url" content="https://blog.jihoon.me/blog/Using-RIBs-Part-2"/><title>RIBs 사용해보기 Part 2 | Jihoon.me</title><meta name="twitter:title" content="RIBs 사용해보기 Part 2 | Jihoon.me"/><meta name="og:title" content="RIBs 사용해보기 Part 2 | Jihoon.me"/><meta name="description" content="RIBs의 간단한 사용 방법에 대해서 알아봅시다."/><meta name="twitter:description" content="RIBs의 간단한 사용 방법에 대해서 알아봅시다."/><meta name="og:description" content="RIBs의 간단한 사용 방법에 대해서 알아봅시다."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/static/styles/default_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/header_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/about_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/post_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/sectionPage_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/errorPage_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/footer_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/tag_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/tagDetail_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/pagination_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/nextAndPreview_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/docsearch_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/home_style.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Jihoon.me"/></head><body><header id="blog-head" class="blog-head outer"><div class="blog-head-inner inner"><div class="blog-head-brand"><div class="menu-icon-container"><div class="menu-icon"><span class="line-1"></span><span class="line-2"></span></div></div><a href="/" class="blog-head-logo"><img src="/static/images/Icon/icon.svg" alt="Jihoonahn Blog"/></a><div class="DocSearch-Button-container"><div id="docsearch" class="blog-search blog-icon-btn"></div></div></div><nav class="blog-head-menu"><ul class="nav"><li><a href="/blog" class="nav-item">Blog</a></li><li><a href="/about" class="nav-item">About</a></li></ul></nav></div><script src="/static/scripts/Header/header-scroll.js"></script><script src="/static/scripts/Header/header-menu.js"></script><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script type="text/javascript" src="/static/scripts/Doc_Search/DocSearch.js"></script></header><div class="wrapper"><article><header class="site-post-head"><div class="site-post-head-image" style="background-image: url(https://user-images.githubusercontent.com/68891494/235434680-57ac3fd0-05b5-405a-8478-3d4b9eac5715.svg"></div></header><div class="site-post-head-title"><h1>RIBs 사용해보기 Part 2</h1><section class="site-post-full-meta"><time>2022.11.04</time><span class="date-divider">|</span><a href="https://blog.jihoon.me/tags/swift">Swift. </a><a href="https://blog.jihoon.me/tags/architecture">Architecture. </a><a href="https://blog.jihoon.me/tags/ribs">RIBs. </a><a href="https://blog.jihoon.me/tags/actual-use">Actual Use. </a></section></div><div class="site-post-body"><div><p>저번 포스트에서는 RIBs를 사용하기 위해서 세팅하는 법에 대해서 배웠습니다. 이번 포스트는 저번 글의 연장선입니다.</p><p>혹시 저번 글을 읽지 않으셨다면, <a href="https://blog.jihoon.me/posts/Using-RIBs-Part-1/">Using RIBs Part 1</a> 을 먼저 보고 오시는 것이 도움될 것입니다.</p><p>그럼 다시 시작해보겠습니다</p><hr><p>저희가 간단하게 구현할 앱입니다. 물론 오늘은 Onboarding이랑 Main만 연결할 것입니다.</p><img width = 80% src = "https://user-images.githubusercontent.com/68891494/201262846-f5854953-aa3f-454f-b885-0fbc05ec7cc7.png"></img><p>일단 Onboarding, Main RIB을 생성해줍니다.</p><img width = 50% src = "https://user-images.githubusercontent.com/68891494/201261727-94182b2a-e39b-4937-9955-10a6950dee41.png"></img><p>Root와 Main &amp; Onboarding을 연결해주기 위해서 RootBuilder에서 작업을 해줍니다.</p><pre><code><span class="keyword">func</span> build() -&gt; <span class="type">LaunchRouting</span> {
    <span class="keyword">let</span> component = <span class="type">RootComponent</span>(dependency: dependency)
    <span class="keyword">let</span> viewController = <span class="type">RootViewController</span>()
    <span class="keyword">let</span> interactor = <span class="type">RootInteractor</span>(presenter: viewController)
    <span class="keyword">let</span> onboardingBuilder = <span class="type">OnboardingBuilder</span>(dependency: component)
    <span class="keyword">let</span> mainBuilder = <span class="type">MainBuilder</span>(dependency: component)
    <span class="keyword">return</span> <span class="type">RootRouter</span>(interactor: interactor, viewController: viewController)
}
</code></pre><p>이렇게 하시면</p><img width="100%" src="https://user-images.githubusercontent.com/68891494/201265977-313c2925-3f3b-423f-bfae-d977929bb027.png"></img><p>이러한 에러가 발생합니다. 에러가 발생하는 이유는 Component에서 MainDependency와 OnboardingDependency를 상속하지 않았기 때문에 발생합니다.</p><p>RootBuilder 파일 안에 있는 RootComponent에 MainDependency와 OnboardingDependency를 상속해줍니다.</p><pre><code><span class="keyword">extension</span> <span class="type">RootComponent</span>: <span class="type">MainDependency</span>, <span class="type">OnboardingDependency</span> {}
</code></pre><p>이러면 에러가 사라질 것입니다!</p><p>이후 RootRouter에서 각각 RIB의 Buildable과 Routing을 생성합니다.</p><pre><code><span class="keyword">final class</span> RootRouter: <span class="type">LaunchRouter</span>&lt;<span class="type">RootInteractable</span>, <span class="type">RootViewControllable</span>&gt;, <span class="type">RootRouting</span> {
    <span class="comment">// MARK: - Onboarding</span>
    <span class="keyword">private let</span> onboardingBuilder: <span class="type">OnboardingBuildable</span>
    <span class="keyword">private var</span> onboardingRouter: <span class="type">OnboardingRouting</span>?
    <span class="comment">// MARK: - Main</span>
    <span class="keyword">private let</span> mainBuilder: <span class="type">MainBuildable</span>
    <span class="keyword">private var</span> mainRouter: <span class="type">MainRouting</span>?
    
    <span class="keyword">init</span>(
        onboardingBuilder: <span class="type">OnboardingBuildable</span>,
        mainBuilder: <span class="type">MainBuildable</span>,
        interactor: <span class="type">RootInteractable</span>,
        viewController: <span class="type">RootViewControllable</span>
    ) {
        <span class="keyword">self</span>.<span class="property">mainBuilder</span> = mainBuilder
        <span class="keyword">self</span>.<span class="property">onboardingBuilder</span> = onboardingBuilder
        <span class="keyword">super</span>.<span class="keyword">init</span>(interactor: interactor, viewController: viewController)
        interactor.<span class="property">router</span> = <span class="keyword">self</span>
    }
</code></pre><p>다시 Builder로 돌아와서</p><pre><code><span class="keyword">func</span> build() -&gt; <span class="type">LaunchRouting</span> {
    <span class="keyword">let</span> component = <span class="type">RootComponent</span>(dependency: dependency)
    <span class="keyword">let</span> viewController = <span class="type">RootViewController</span>()
    <span class="keyword">let</span> interactor = <span class="type">RootInteractor</span>(presenter: viewController)
    <span class="keyword">let</span> onboardingBuilder = <span class="type">OnboardingBuilder</span>(dependency: component)
    <span class="keyword">let</span> mainBuilder = <span class="type">MainBuilder</span>(dependency: component)
    <span class="keyword">return</span> <span class="type">RootRouter</span>(
        onboardingBuilder: onboardingBuilder,
        mainBuilder: mainBuilder,
        interactor: interactor,
        viewController: viewController
    )
}
</code></pre><p>RootRouter에 미리 만들어 놓은 Builder를 넘겨주시면 됩니다.</p><p>그다음.. (역시 RIBs는 세팅할게 많네요)</p><p>Root에서 Main, Onboarding 화면을 이동시켜보도록 하겠습니다.</p><p>Onboarding부터 attach 해보겠습니다.</p><pre><code><span class="keyword">protocol</span> RootInteractable: <span class="type">Interactable</span>, <span class="type">OnboardingListener</span>, <span class="type">MainListener</span> {
    <span class="keyword">var</span> router: <span class="type">RootRouting</span>? { <span class="keyword">get set</span> }
    <span class="keyword">var</span> listener: <span class="type">RootListener</span>? { <span class="keyword">get set</span> }
}
</code></pre><p>일단 시작하기 앞서, interactable 부분에 Listener를 상속 시킵니다.</p><p>그리고 Interactor에서 Routing에 무엇을 attach 할지, detach할지 적어줍니다.</p><pre><code><span class="keyword">protocol</span> RootRouting: <span class="type">ViewableRouting</span> {
    <span class="keyword">func</span> attachOnboarding()
    <span class="keyword">func</span> attachMain()
    <span class="keyword">func</span> detachOnboarding()
    <span class="keyword">func</span> detachMain()
}
</code></pre><p>그후 Attach 코드를 작성해주시면 됩니다.</p><pre><code><span class="keyword">func</span> attachOnboarding() {
    <span class="keyword">guard</span> onboardingRouting == <span class="keyword">nil else</span> { <span class="keyword">return</span> }
    <span class="keyword">let</span> router = onboardingBuilder.<span class="call">build</span>(withListener: interactor)
    <span class="keyword">let</span> vc = router.<span class="property">viewControllable</span>.<span class="property">uiviewController</span>
    vc.<span class="property">modalTransitionStyle</span> = .<span class="dotAccess">crossDissolve</span>
    vc.<span class="property">modalPresentationStyle</span> = .<span class="dotAccess">overFullScreen</span>
    viewControllable.<span class="property">uiviewController</span>.<span class="call">present</span>(vc, animated: <span class="keyword">true</span>)
    <span class="call">attachChild</span>(router)
    <span class="keyword">self</span>.<span class="property">onboardingRouting</span> = router
}
</code></pre><p>그리고 Attach가 되었으면 detach도 시켜줘야겠죠?</p><pre><code><span class="keyword">func</span> detachOnboarding() {
    <span class="keyword">guard let</span> router = onboardingRouting <span class="keyword">else</span> { <span class="keyword">return</span> }
    viewController.<span class="property">uiviewController</span>.<span class="call">dismiss</span>(animated: <span class="keyword">true</span>)
    <span class="keyword">self</span>.<span class="property">onboardingRouting</span> = <span class="keyword">nil</span>
    detachChild(router)
}
</code></pre><p>자 이제 Router 부분은 끝난것 같네요! 이제 정말 실행되는지 확인해보겠습니다!</p><p>Interactor로 가셔서</p><pre><code><span class="keyword">override func</span> didBecomeActive() {
      <span class="keyword">super</span>.<span class="call">didBecomeActive</span>()
      router?.<span class="call">attachOnboarding</span>()
}
</code></pre><p>이런식으로 테스트하겠습니다.</p><p>그냥 연결만 됬는지 확인하기 위해서 Onboarding에서 background 색상을 바꿔보겠습니다.</p><p>[실행화면]</p><img width = 30% src = "https://user-images.githubusercontent.com/68891494/201284305-3e750a12-3e62-4f19-8163-6fe4d3b3cedc.png">
</img><p>일단 연결이 됬습니다! 글이 길어지는 관계로 다음 파트에서 작성하도록 하겠습니다!</p><p><a href="https://github.com/Jihoonahn/Blog-Documment/tree/main/Architecture/RIBs/RIBs-2/ExRIBs">전체코드</a></p><p>[공지] RIBs example과 글 작성이 너무 오래 걸리는 관계로 RIBs 관련 글을 좀 미루려고 합니다 ㅎㅎ..</p></div></div><div class="nextAndPreview"><div class="preview-container"><a href="/blog/Using-RIBs-Part-1" class="preview-link"><div class="preview-textdir"><p>Preview Post</p><h3 class="preview-title">RIBs 사용해보기 Part 1</h3></div></a></div><div class="next-container"><a href="/blog/Yackety-Yak-iOS-4" class="next-link"><div class="next-textdir"><p>Next Post</p><h3 class="next-title">와글와글 제4회 발표 회고록</h3></div></a></div></div><script src="https://utteranc.es/client.js" repo="JiHoonAHN/Blog" issue-term="pathname" label="comments" theme="github-light" crossorigin="anonymous" async></script></article><script src="/static/scripts/Channel_talk/Channel_talk.js"></script></div><footer class="site-footer"><div class="site-footer__inner"><div class="copyright"><div><p>Copyright © <a href="https://github.com/jihoonahn">Jihoonahn</a></p></div><div><p>Made with Swift</p></div></div><div class="social"><ul><li class="social_link"><a href="https://github.com/Jihoonahn"><i class="fa-brands fa-github"></i></a></li><li class="social_link"><a href="https://www.linkedin.com/in/ahnjihoon/"><i class="fa-brands fa-linkedin-in"></i></a></li><li class="social_link"><a href="https://twitter.com/jihoon_dev"><i class="fa-brands fa-twitter"></i></a></li><li class="social_link"><a href="mailto:official@jihoon.me"><i class="fa-solid fa-envelope"></i></a></li><li class="social_link"><a href="https://blog.jihoon.me/feed.rss"><i class="fa-solid fa-rss"></i></a></li></ul></div></div></footer></body></html>