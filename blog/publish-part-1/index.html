<!DOCTYPE html><html lang="en"><head><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet"/><script src="https://kit.fontawesome.com/662f6d0c39.js" crossorigin="anonymous"></script><script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/></head><head><meta charset="UTF-8"/><meta name="og:site_name" content="Jihoon.me"/><link rel="canonical" href="https://blog.jihoon.me/blog/publish-part-1"/><meta name="twitter:url" content="https://blog.jihoon.me/blog/publish-part-1"/><meta name="og:url" content="https://blog.jihoon.me/blog/publish-part-1"/><title>Publish 사용하기 part 1 | Jihoon.me</title><meta name="twitter:title" content="Publish 사용하기 part 1 | Jihoon.me"/><meta name="og:title" content="Publish 사용하기 part 1 | Jihoon.me"/><meta name="description" content="Swift publish 커스텀하기"/><meta name="twitter:description" content="Swift publish 커스텀하기"/><meta name="og:description" content="Swift publish 커스텀하기"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/static/styles/default_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/header_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/about_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/post_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/sectionPage_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/errorPage_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/footer_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/tag_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/tagDetail_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/pagination_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/nextAndPreview_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/docsearch_style.css" type="text/css"/><link rel="stylesheet" href="/static/styles/home_style.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Jihoon.me"/></head><body><header id="blog-head" class="blog-head outer"><div class="blog-head-inner inner"><div class="blog-head-brand"><div class="menu-icon-container"><div class="menu-icon"><span class="line-1"></span><span class="line-2"></span></div></div><a href="/" class="blog-head-logo"><img src="/static/images/Icon/icon.svg" alt="Jihoonahn Blog"/></a><div class="DocSearch-Button-container"><div id="docsearch" class="blog-search blog-icon-btn"></div></div></div><nav class="blog-head-menu"><ul class="nav"><li><a href="/blog" class="nav-item">Blog</a></li><li><a href="/about" class="nav-item">About</a></li></ul></nav></div><script src="/static/scripts/Header/header-scroll.js"></script><script src="/static/scripts/Header/header-menu.js"></script><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script type="text/javascript" src="/static/scripts/Doc_Search/DocSearch.js"></script></header><div class="wrapper"><article><header class="site-post-head"><div class="site-post-head-image" style="background-image: url(https://github.com/Jihoonahn/Blog/assets/68891494/c463ed7f-c64d-45d0-8900-fd5a8d99ce85"></div></header><div class="site-post-head-title"><h1>Publish 사용하기 part 1</h1><section class="site-post-full-meta"><time>2023.09.12</time><span class="date-divider">|</span><a href="https://blog.jihoon.me/tags/swift">Swift. </a><a href="https://blog.jihoon.me/tags/publish">Publish. </a><a href="https://blog.jihoon.me/tags/web">Web. </a><a href="https://blog.jihoon.me/tags/theory">Theory. </a></section></div><div class="site-post-body"><div><p>오늘은 publish를 커스텀하는 방법에 대해서 글을 작성할 것입니다. <br/></p><p>일단 시작하겠습니다!</p><hr><pre><code><span class="keyword">import</span> Foundation
<span class="keyword">import</span> Publish
<span class="keyword">import</span> Plot

<span class="comment">// This type acts as the configuration for your website.</span>
<span class="keyword">struct</span> Example: <span class="type">Website</span> {
    <span class="keyword">enum</span> SectionID: <span class="type">String</span>, <span class="type">WebsiteSectionID</span> {
        <span class="comment">// Add the sections that you want your website to contain here:</span>
        <span class="keyword">case</span> posts
    }

    <span class="keyword">struct</span> ItemMetadata: <span class="type">WebsiteItemMetadata</span> {
        <span class="comment">// Add any site-specific metadata that you want to use here.</span>
    }

    <span class="comment">// Update these properties to configure your website:</span>
    <span class="keyword">var</span> url = <span class="type">URL</span>(string: <span class="string">"https://your-website-url.com"</span>)!
    <span class="keyword">var</span> name = <span class="string">"Example"</span>
    <span class="keyword">var</span> description = <span class="string">"A description of Part"</span>
    <span class="keyword">var</span> language: <span class="type">Language</span> { .<span class="dotAccess">english</span> }
    <span class="keyword">var</span> imagePath: <span class="type">Path</span>? { <span class="keyword">nil</span> }
}

<span class="comment">// This will generate your website using the built-in Foundation theme:</span>
<span class="keyword">try</span> <span class="type">Example</span>().<span class="call">publish</span>(withTheme: .<span class="dotAccess">foundation</span>)

</code></pre><p>기존 처음 Publish 프로젝트를 생성하고, <code>main.swift</code> 코드입니다.</p><p>먼저 위 예시의 Example 구조체 부터 보겠습니다.</p><pre><code><span class="keyword">struct</span> Example: <span class="type">Website</span> {
    <span class="keyword">enum</span> SectionID: <span class="type">String</span>, <span class="type">WebsiteSectionID</span> {
        <span class="comment">// Add the sections that you want your website to contain here:</span>
        <span class="keyword">case</span> posts
    }

    <span class="keyword">struct</span> ItemMetadata: <span class="type">WebsiteItemMetadata</span> {
        <span class="comment">// Add any site-specific metadata that you want to use here.</span>
    }

    <span class="comment">// Update these properties to configure your website:</span>
    <span class="keyword">var</span> url = <span class="type">URL</span>(string: <span class="string">"https://your-website-url.com"</span>)!
    <span class="keyword">var</span> name = <span class="string">"Example"</span>
    <span class="keyword">var</span> description = <span class="string">"A description of Part"</span>
    <span class="keyword">var</span> language: <span class="type">Language</span> { .<span class="dotAccess">english</span> }
    <span class="keyword">var</span> imagePath: <span class="type">Path</span>? { <span class="keyword">nil</span> }
}
</code></pre><ul><li><code>Section ID</code> : 웹사이트의 Section ID를 나타내는 열거형입니다.</li><li><code>itemMetadata</code> : 사용자가 웹사이트에 대한 Meta data 값을 지정할 수 있는 부분입니다.</li><li><code>url</code> : 웹 사이트를 어떤 URL로 호스팅 될지 지정해주는 부분입니다.</li><li><code>name</code> : 웹 사이트의 이름을 지정해주는 부분입니다.</li><li><code>description</code> : 웹사이트에 대한 설명을 지정해주는 부분입니다.</li><li><code>language</code> : 웹사이트에서 사용하는 주요한 언어를 지정해주는 부분입니다.</li><li><code>imagePath</code> : 웹사이트를 나타내는 이미지의 경로를 지정해주는 부분입니다.</li></ul><p>위 예시에는 나와있지 않지만, <code>favicon</code> 과 <code>tagHTMLConfig</code> 값도 있습니다.</p><ul><li><code>favicon</code> : 웹 브라우저의 주소창에 표시되는 아이콘을 설정 할 수 있습니다.</li><li><code>tagHTMLConfig</code> : 웹 사이트에 대한 Tag HTML을 생성할 때 사용이 됩니다.</li></ul><p>Publish에는 기본적으로 <code>Foundation Theme</code> 가 제공됩니다.</p><pre><code><span class="keyword">try</span> <span class="type">Example</span>().<span class="call">publish</span>(withTheme: .<span class="dotAccess">foundation</span>)
</code></pre><p>이 부분에서 Publish 자체에서 제공하는 <code>Foundation Theme</code> 을 사용한다는 것을 알 수 있습니다.</p><p>커스텀을 시작하기 위해서는 저부분 부터 수정이 필요합니다. <br/><br/></p><h2>테마 커스텀</h2><p>여기서부터 좀 publish 사용 난이도가 많이 올라갑니다.</p><p><code>PublishHTMLFactory.swift</code> 파일을 생성합니다.</p><pre><code><span class="keyword">struct</span> PublishHTMLFactory: <span class="type">HTMLFactory</span>
</code></pre><p>그리고 <code>HTMLFactory</code> protocol을 상속 받으면 구조가 생성이됩니다.</p><p>처음에는 위 예시 코드에서 있던 Example 구조체를 Site typealias에 입력해주면 됩니다.</p><pre><code><span class="keyword">struct</span> PublishHTMLFactory: <span class="type">HTMLFactory</span> {
    <span class="keyword">typealias</span> Site = <span class="type">Example</span>
}
</code></pre><p>이렇게 해주시면,</p><pre><code><span class="keyword">struct</span> PublishHTMLFactory: <span class="type">HTMLFactory</span> {
    <span class="keyword">typealias</span> Site = <span class="type">Example</span>

    <span class="keyword">func</span> makeIndexHTML(for index: <span class="type">Publish</span>.<span class="type">Index</span>, context: <span class="type">Publish</span>.<span class="type">PublishingContext</span>&lt;<span class="type">Example</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">Plot</span>.<span class="type">HTML</span> {
        &lt;#code#&gt;
    }
    
    <span class="keyword">func</span> makeSectionHTML(for section: <span class="type">Publish</span>.<span class="type">Section</span>&lt;<span class="type">Example</span>&gt;, context: <span class="type">Publish</span>.<span class="type">PublishingContext</span>&lt;<span class="type">Example</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">Plot</span>.<span class="type">HTML</span> {
        &lt;#code#&gt;
    }
    
    <span class="keyword">func</span> makeItemHTML(for item: <span class="type">Publish</span>.<span class="type">Item</span>&lt;<span class="type">Example</span>&gt;, context: <span class="type">Publish</span>.<span class="type">PublishingContext</span>&lt;<span class="type">Example</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">Plot</span>.<span class="type">HTML</span> {
        &lt;#code#&gt;
    }
    
    <span class="keyword">func</span> makePageHTML(for page: <span class="type">Publish</span>.<span class="type">Page</span>, context: <span class="type">Publish</span>.<span class="type">PublishingContext</span>&lt;<span class="type">Example</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">Plot</span>.<span class="type">HTML</span> {
        &lt;#code#&gt;
    }
    
    <span class="keyword">func</span> makeTagListHTML(for page: <span class="type">Publish</span>.<span class="type">TagListPage</span>, context: <span class="type">Publish</span>.<span class="type">PublishingContext</span>&lt;<span class="type">Example</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">Plot</span>.<span class="type">HTML</span>? {
        &lt;#code#&gt;
    }
    
    <span class="keyword">func</span> makeTagDetailsHTML(for page: <span class="type">Publish</span>.<span class="type">TagDetailsPage</span>, context: <span class="type">Publish</span>.<span class="type">PublishingContext</span>&lt;<span class="type">Example</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">Plot</span>.<span class="type">HTML</span>? {
        &lt;#code#&gt;
    }
}
</code></pre><p>이런 코드가 생깁니다.</p><p>각 메서드에 대한 설명을 하겠습니다.</p><ul><li><code>makeIndexHTML</code> : 웹사이트의 main <code>index.html</code> 페이지를 생성합니다.</li><li><code>makeSectionHTML</code> : 웹사이트의 Section 부분에 사용할 <code>index.html</code> 페이지를 생성합니다.</li><li><code>makeItemHTML</code> : 웹사이트의 item에 사용할 HTML 파일을 생성합니다.</li><li><code>makePageHTML</code> : 웹사이트의 page에 사용할 HTML 파일을 생성합니다.</li><li><code>makeTagListHTML</code>: Publish에서 제공하는 Tag 부분의 전체 리스트를 제공해주는 화면입니다.</li><li><code>makeTagDetailsHTML</code> : Tag 부분의 상세 내용을 제공해주는 화면입니다.</li></ul><p><code>HTMLFactory</code>에서 <code>&lt;#code#&gt;</code> 부분 설명이 길어질것 같아서 다음 Post에 작성법에 대해서 상세하게 설명하도록 하겠습니다.</p><p>HTMLFactory 내용을 다 입력하고, Theme를 등록하면 됩니다.</p><pre><code><span class="keyword">import</span> Publish
<span class="keyword">import</span> Plot

<span class="keyword">extension</span> <span class="type">Theme</span> <span class="keyword">where</span> <span class="type">Site</span> == <span class="type">Example</span> {
    <span class="keyword">static var</span> publish: <span class="type">Self</span> {
        <span class="type">Theme</span>(htmlFactory: <span class="type">PublishHTMLFactory</span>())
    }
}
</code></pre><p>이런식으로 Example에서 사용 가능한 <code>publish</code> 테마를 등록하였습니다.</p><pre><code><span class="keyword">try</span> <span class="type">Example</span>().<span class="call">publish</span>(withTheme: .<span class="dotAccess">publish</span>)
</code></pre><p><code>main.swift</code> 파일 부분에서 간단하게는 이렇게 사용이 가능합니다.</p><p>또는 직접 custom pipeline를 구축하는 방법도 있습니다.</p><pre><code><span class="keyword">try</span> <span class="type">Example</span>().<span class="call">publish</span>(using: [
    .<span class="call">optional</span>(.<span class="call">copyResources</span>()),
    .<span class="call">addMarkdownFiles</span>(),
    .<span class="call">generateHTML</span>(withTheme: .<span class="dotAccess">publish</span>),
    .<span class="call">generateRSSFeed</span>(including: [.<span class="dotAccess">posts</span>]),
    .<span class="call">generateSiteMap</span>()
])
</code></pre><p><code>publish(using:)</code> 메서드에서 pipeline을 하나하나 사용자가 원하는대로 지정할 수 있습니다.</p><hr><p>이번 글에서는 Publish 커스텀 중에서 구조를 이루는 부분에 대한 글을 적어봤습니다. <br/> 다음 글에서는 publish에서 HTML을 어떻게 작성하는지에 대한 내용을 작성할 예정입니다.</p></div></div><div class="nextAndPreview"><div class="preview-container"><a href="/blog/Publish-Introduce" class="preview-link"><div class="preview-textdir"><p>Preview Post</p><h3 class="preview-title">Publish 소개</h3></div></a></div><div class="next-container"></div></div><script src="https://utteranc.es/client.js" repo="JiHoonAHN/Blog" issue-term="pathname" label="comments" theme="github-light" crossorigin="anonymous" async></script></article><script src="/static/scripts/Channel_talk/Channel_talk.js"></script></div><footer class="site-footer"><div class="site-footer__inner"><div class="copyright"><div><p>Copyright © <a href="https://github.com/jihoonahn">Jihoonahn</a></p></div><div><p>Made with Swift</p></div></div><div class="social"><ul><li class="social_link"><a href="https://github.com/Jihoonahn"><i class="fa-brands fa-github"></i></a></li><li class="social_link"><a href="https://www.linkedin.com/in/ahnjihoon/"><i class="fa-brands fa-linkedin-in"></i></a></li><li class="social_link"><a href="mailto:jihoonahn.dev@gmail.com"><i class="fa-solid fa-envelope"></i></a></li><li class="social_link"><a href="https://blog.jihoon.me/feed.rss"><i class="fa-solid fa-rss"></i></a></li></ul></div></div></footer></body></html>