<!DOCTYPE html><html><head lang="ko"><meta charset="UTF-8"/><meta name="og:site_name" content="jihoon.me"/><link rel="canonical" href="https://blog.jihoon.me/blog/publish-part-1"/><meta name="twitter:url" content="https://blog.jihoon.me/blog/publish-part-1"/><meta name="og:url" content="https://blog.jihoon.me/blog/publish-part-1"/><title>Publish 사용하기 part 1</title><meta name="twitter:title" content="Publish 사용하기 part 1"/><meta name="og:title" content="Publish 사용하기 part 1"/><meta name="description" content="Swift publish 구조 살펴보기"/><meta name="twitter:description" content="Swift publish 구조 살펴보기"/><meta name="og:description" content="Swift publish 구조 살펴보기"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to jihoon.me"/></head><body><header id="header" class="fixed top-0 left-0 w-full z-20 bg-blog-c-nav backdrop-saturate-125 backdrop-blur-xl"><div class="pl-6 pr-4"><div class="flex justify-between mx-auto my-0 max-w-3xl"><a href="/" class="flex items-center h-blog-nav"><img src="/static/images/icon.svg" class="max-h-11 my-0"/></a><div class="flex justify-end items-center grow"><div class="flex items-center pl-4"><div id="docsearch" class="blogDocsearch"></div></div><button id="mobileNavButton" aria-label="Mobile navigation" class="cursor-pointer flex w-10 h-blog-nav items-center justify-center group md:hidden"><span class="relative h-4 w-4 overflow-hidden"><span class="transition duration-200 top-0 left-0 absolute w-full h-0.5 bg-blog-c-nav-text ease translate-x-0 translate-y-0 group-[.expanded]:rotate-45 group-[.expanded]:translate-y-0 group-[.expanded]:top-1.5"></span><span class="transition duration-200 top-1.5 left-0 absolute w-full h-0.5 bg-blog-c-nav-text ease translate-x-0 translate-y-0 group-[.expanded]:opacity-0"></span><span class="transition duration-200 top-3 left-0 absolute w-full h-0.5 bg-blog-c-nav-text ease translate-x-0 translate-y-0 group-[.expanded]:-rotate-45 group-[.expanded]:-translate-y-0 group-[.expanded]:top-1.5"></span></span></button></div><nav id="blogNav" class="hidden md:flex"><ul class="flex list-none m-0"><li><a href="/blog" class="blogNavItem blogNavBarMenuLink block py-0 px-3 text-xs leading-calc-blog-nav">Blog</a></li><li><a href="/about" class="blogNavItem blogNavBarMenuLink block py-0 px-3 text-xs leading-calc-blog-nav">About</a></li></ul></nav></div><div id="blogNavScreen" class="hidden h-screen"><div class="my-0 mx-auto max-w-[288px] pt-6 pb-24"><nav class="inline"><ul class="list-none m-0"><li><a href="/blog" class="blogNavItem block py-3 blogNavBarMenuLink border-b border-zinc-500 border-solid">Blog</a></li><li><a href="/about" class="blogNavItem block py-3 blogNavBarMenuLink border-b border-zinc-500 border-solid">About</a></li></ul></nav><div class="mt-4 w-full"><ul class="flex justify-center gap-4 list-none"><li><a href="https://github.com/jihoonahn" class="text-center w-6 h-6"><img src="/static/icons/github.svg" class="w-6 h-6 rounded-none"/></a></li><li><a href="https://www.linkedin.com/in/ahnjihoon/" class="text-center w-6 h-6"><img src="/static/icons/linkedin.svg" class="w-6 h-6 rounded-none"/></a></li><li><a href="mailto:jihoonahn.dev@gmail.com" class="text-center w-6 h-6"><img src="/static/icons/envelope-solid.svg" class="w-6 h-6 rounded-none"/></a></li><li><a href="https://blog.jihoon.me/feed.rss" class="text-center w-6 h-6"><img src="/static/icons/rss-solid.svg" class="w-6 h-6 rounded-none"/></a></li></ul></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script src="/static/scripts/header.js"></script><script type="text/javascript" src="/static/scripts/docsearch.js"></script></header><main id="main" class="relative z-10 flex flex-1 flex-col min-h-screen pt-20 pb-14"><section><article><div><div class="component md:w-[654px]"><div><time class="font-semibold text-gray-500 text-sm">2023년 09월 12일</time></div></div><div class="component my-0 md:w-[654px]"><div><h1 class="m-0 leading-normal font-semibold text-heading-2 md:text-heading-1">Publish 사용하기 part 1</h1></div></div><div class="component mt-5 mb-0 md:w-[654px]"><div class="text-lg md:text-2xl mx-auto">Swift publish 구조 살펴보기</div></div></div><figure class="component rounded-xl border border-gray-200 overflow-hidden min-w-[85%] lg:min-w-[320px]"><div><img src="https://github.com/jihoonahn/blog/assets/68891494/b671b6fb-65cf-438e-8552-46b19489fdeb" class="my-0"/></div></figure><div class="mx-auto w-[85%] text-left mt-8 md:w-[700px]"><div><h2>Publish 구조 살펴보기</h2><p>기존 처음 Publish 프로젝트를 생성하고, <code>main.swift</code> 코드입니다.</p><pre><code><span class="keyword">import</span> Foundatio
<span class="keyword">import</span> Publish
<span class="keyword">import</span> Plot

<span class="comment">// This type acts as the configuration for your website.</span>
<span class="keyword">struct</span> Example: <span class="type">Website</span> {
    <span class="keyword">enum</span> SectionID: <span class="type">String</span>, <span class="type">WebsiteSectionID</span> {
        <span class="comment">// Add the sections that you want your website to contain here:</span>
        <span class="keyword">case</span> posts
    }

    <span class="keyword">struct</span> ItemMetadata: <span class="type">WebsiteItemMetadata</span> {
        <span class="comment">// Add any site-specific metadata that you want to use here.</span>
    }

    <span class="comment">// Update these properties to configure your website:</span>
    <span class="keyword">var</span> url = <span class="type">URL</span>(string: <span class="string">"https://your-website-url.com"</span>)!
    <span class="keyword">var</span> name = <span class="string">"Example"</span>
    <span class="keyword">var</span> description = <span class="string">"A description of Part"</span>
    <span class="keyword">var</span> language: <span class="type">Language</span> { .<span class="dotAccess">english</span> }
    <span class="keyword">var</span> imagePath: <span class="type">Path</span>? { <span class="keyword">nil</span> }
}

<span class="comment">// This will generate your website using the built-in Foundation theme:</span>
<span class="keyword">try</span> <span class="type">Example</span>().<span class="call">publish</span>(withTheme: .<span class="dotAccess">foundation</span>)

</code></pre><p>먼저 위 예시의 Example 구조체 부터 보겠습니다.</p><pre><code><span class="keyword">struct</span> Example: <span class="type">Website</span> {
    <span class="keyword">enum</span> SectionID: <span class="type">String</span>, <span class="type">WebsiteSectionID</span> {
        <span class="comment">// Add the sections that you want your website to contain here:</span>
        <span class="keyword">case</span> posts
    }

    <span class="keyword">struct</span> ItemMetadata: <span class="type">WebsiteItemMetadata</span> {
        <span class="comment">// Add any site-specific metadata that you want to use here.</span>
    }

    <span class="comment">// Update these properties to configure your website:</span>
    <span class="keyword">var</span> url = <span class="type">URL</span>(string: <span class="string">"https://your-website-url.com"</span>)!
    <span class="keyword">var</span> name = <span class="string">"Example"</span>
    <span class="keyword">var</span> description = <span class="string">"A description of Part"</span>
    <span class="keyword">var</span> language: <span class="type">Language</span> { .<span class="dotAccess">english</span> }
    <span class="keyword">var</span> imagePath: <span class="type">Path</span>? { <span class="keyword">nil</span> }
}
</code></pre><ul><li><code>Section ID</code> : 웹사이트의 Section ID를 나타내는 열거형입니다.</li><li><code>itemMetadata</code> : 사용자가 웹사이트에 대한 Meta data 값을 지정할 수 있는 부분입니다.</li><li><code>url</code> : 웹 사이트를 어떤 URL로 호스팅 될지 지정해주는 부분입니다.</li><li><code>name</code> : 웹 사이트의 이름을 지정해주는 부분입니다.</li><li><code>description</code> : 웹사이트에 대한 설명을 지정해주는 부분입니다.</li><li><code>language</code> : 웹사이트에서 사용하는 주요한 언어를 지정해주는 부분입니다.</li><li><code>imagePath</code> : 웹사이트를 나타내는 이미지의 경로를 지정해주는 부분입니다.</li></ul><p>위 예시에는 나와있지 않지만, <code>favicon</code> 과 <code>tagHTMLConfig</code> 값도 있습니다.</p><ul><li><code>favicon</code> : 웹 브라우저의 주소창에 표시되는 아이콘을 설정 할 수 있습니다.</li><li><code>tagHTMLConfig</code> : 웹 사이트에 대한 Tag HTML을 생성할 때 사용이 됩니다.</li></ul><p>Publish에는 기본적으로 <code>Foundation Theme</code> 가 제공됩니다.</p><pre><code><span class="keyword">try</span> <span class="type">Example</span>().<span class="call">publish</span>(withTheme: .<span class="dotAccess">foundation</span>)
</code></pre><p>이 부분에서 Publish 자체에서 제공하는 <code>Foundation Theme</code> 을 사용한다는 것을 알 수 있습니다.</p><p>커스텀을 시작하기 위해서는 저부분 부터 수정이 필요합니다. <br/><br/></p><h2>테마 커스텀</h2><p>여기서부터 좀 publish 사용 난이도가 많이 올라갑니다.</p><p><code>PublishHTMLFactory.swift</code> 파일을 생성합니다.</p><pre><code><span class="keyword">struct</span> PublishHTMLFactory: <span class="type">HTMLFactory</span>
</code></pre><p>그리고 <code>HTMLFactory</code> protocol을 상속 받으면 구조가 생성이됩니다.</p><p>처음에는 위 예시 코드에서 있던 Example 구조체를 Site typealias에 입력해주면 됩니다.</p><pre><code><span class="keyword">struct</span> PublishHTMLFactory: <span class="type">HTMLFactory</span> {
    <span class="keyword">typealias</span> Site = <span class="type">Example</span>
}
</code></pre><p>이렇게 해주시면,</p><pre><code><span class="keyword">struct</span> PublishHTMLFactory: <span class="type">HTMLFactory</span> {
    <span class="keyword">typealias</span> Site = <span class="type">Example</span>

    <span class="keyword">func</span> makeIndexHTML(for index: <span class="type">Publish</span>.<span class="type">Index</span>, context: <span class="type">Publish</span>.<span class="type">PublishingContext</span>&lt;<span class="type">Example</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">Plot</span>.<span class="type">HTML</span> {
        &lt;#code#&gt;
    }
    
    <span class="keyword">func</span> makeSectionHTML(for section: <span class="type">Publish</span>.<span class="type">Section</span>&lt;<span class="type">Example</span>&gt;, context: <span class="type">Publish</span>.<span class="type">PublishingContext</span>&lt;<span class="type">Example</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">Plot</span>.<span class="type">HTML</span> {
        &lt;#code#&gt;
    }
    
    <span class="keyword">func</span> makeItemHTML(for item: <span class="type">Publish</span>.<span class="type">Item</span>&lt;<span class="type">Example</span>&gt;, context: <span class="type">Publish</span>.<span class="type">PublishingContext</span>&lt;<span class="type">Example</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">Plot</span>.<span class="type">HTML</span> {
        &lt;#code#&gt;
    }
    
    <span class="keyword">func</span> makePageHTML(for page: <span class="type">Publish</span>.<span class="type">Page</span>, context: <span class="type">Publish</span>.<span class="type">PublishingContext</span>&lt;<span class="type">Example</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">Plot</span>.<span class="type">HTML</span> {
        &lt;#code#&gt;
    }
    
    <span class="keyword">func</span> makeTagListHTML(for page: <span class="type">Publish</span>.<span class="type">TagListPage</span>, context: <span class="type">Publish</span>.<span class="type">PublishingContext</span>&lt;<span class="type">Example</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">Plot</span>.<span class="type">HTML</span>? {
        &lt;#code#&gt;
    }
    
    <span class="keyword">func</span> makeTagDetailsHTML(for page: <span class="type">Publish</span>.<span class="type">TagDetailsPage</span>, context: <span class="type">Publish</span>.<span class="type">PublishingContext</span>&lt;<span class="type">Example</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">Plot</span>.<span class="type">HTML</span>? {
        &lt;#code#&gt;
    }
}
</code></pre><p>이런 코드가 생깁니다.</p><p>각 메서드에 대한 설명을 하겠습니다.</p><ul><li><code>makeIndexHTML</code> : 웹사이트의 main <code>index.html</code> 페이지를 생성합니다.</li><li><code>makeSectionHTML</code> : 웹사이트의 Section 부분에 사용할 <code>index.html</code> 페이지를 생성합니다.</li><li><code>makeItemHTML</code> : 웹사이트의 item에 사용할 HTML 파일을 생성합니다.</li><li><code>makePageHTML</code> : 웹사이트의 page에 사용할 HTML 파일을 생성합니다.</li><li><code>makeTagListHTML</code>: Publish에서 제공하는 Tag 부분의 전체 리스트를 제공해주는 화면입니다.</li><li><code>makeTagDetailsHTML</code> : Tag 부분의 상세 내용을 제공해주는 화면입니다.</li></ul><p><code>HTMLFactory</code>에서 <code>&lt;#code#&gt;</code> 부분 설명이 길어질것 같아서 다음 Post에 작성법에 대해서 상세하게 설명하도록 하겠습니다.</p><p>HTMLFactory 내용을 다 입력하고, Theme를 등록하면 됩니다.</p><pre><code><span class="keyword">import</span> Publish
<span class="keyword">import</span> Plot

<span class="keyword">extension</span> <span class="type">Theme</span> <span class="keyword">where</span> <span class="type">Site</span> == <span class="type">Example</span> {
    <span class="keyword">static var</span> publish: <span class="type">Self</span> {
        <span class="type">Theme</span>(htmlFactory: <span class="type">PublishHTMLFactory</span>())
    }
}
</code></pre><p>이런식으로 Example에서 사용 가능한 <code>publish</code> 테마를 등록하였습니다.</p><pre><code><span class="keyword">try</span> <span class="type">Example</span>().<span class="call">publish</span>(withTheme: .<span class="dotAccess">publish</span>)
</code></pre><p><code>main.swift</code> 파일 부분에서 간단하게는 이렇게 사용이 가능합니다.</p><p>또는 직접 custom pipeline를 구축하는 방법도 있습니다.</p><pre><code><span class="keyword">try</span> <span class="type">Example</span>().<span class="call">publish</span>(using: [
    .<span class="call">optional</span>(.<span class="call">copyResources</span>()),
    .<span class="call">addMarkdownFiles</span>(),
    .<span class="call">generateHTML</span>(withTheme: .<span class="dotAccess">publish</span>),
    .<span class="call">generateRSSFeed</span>(including: [.<span class="dotAccess">posts</span>]),
    .<span class="call">generateSiteMap</span>()
])
</code></pre><p><code>publish(using:)</code> 메서드에서 pipeline을 하나하나 사용자가 원하는대로 지정할 수 있습니다.</p><p>위에서 진행한 내용은 <a href="https://github.com/Jihoonahn/Blog-Document/tree/main/Publish/part1">예시코드</a> 를 확인할 수 있습니다.</p><hr><p>이번 글에서는 Publish 커스텀 중에서 구조를 이루는 부분에 대한 글을 적어봤습니다. <br/> 다음 글에서는 publish에서 HTML을 어떻게 작성하는지에 대한 내용을 작성할 예정입니다.</p></div></div><div class="mx-auto w-[85%] text-left mt-8 md:w-[700px]"><div class="flex justify-between mt-6"><div><ul class="m-0"><li class="inline-block mr-1.5"><a href="https://blog.jihoon.me/tags/swift" class="block my-1 px-1.5 py-2 bg-neutral-900 text-white rounded-lg transition duration-200 ease-in-out hover:bg-zinc-300 hover:text-black">Swift</a></li><li class="inline-block mr-1.5"><a href="https://blog.jihoon.me/tags/publish" class="block my-1 px-1.5 py-2 bg-neutral-900 text-white rounded-lg transition duration-200 ease-in-out hover:bg-zinc-300 hover:text-black">Publish</a></li><li class="inline-block mr-1.5"><a href="https://blog.jihoon.me/tags/web" class="block my-1 px-1.5 py-2 bg-neutral-900 text-white rounded-lg transition duration-200 ease-in-out hover:bg-zinc-300 hover:text-black">Web</a></li><li class="inline-block mr-1.5"><a href="https://blog.jihoon.me/tags/theory" class="block my-1 px-1.5 py-2 bg-neutral-900 text-white rounded-lg transition duration-200 ease-in-out hover:bg-zinc-300 hover:text-black">Theory</a></li></ul></div><button aria-label="link share" class="copyPost m-1 w-9 h-9 p-1.5 bg-blog-c-button rounded-full hover:bg-gray-300 transition duration-200 ease-in-out"><img src="/static/icons/copy.svg" class="my-0"/></button></div></div><div class="flex flex-col-reverse px-4 mt-11 mb-4 max-w-3xl mx-auto md:flex-row md:px-0"><div class="min-w-0 flex-1 mt-4 md:mt-0"><a href="/blog/publish-introduce" class="flex cursor-pointer rounded-[10px] bg-blog-c-preview-page w-full h-full p-4 min-h-[4.2rem] items-center"><div class="flex-1 flex flex-col leading-none min-w-0 items-start"><p class="text-gray-500 m-0.5">Preview Post</p><h3 class="text-black text-2xl font-medium m-0.5">Publish 소개</h3></div></a></div><div class="min-w-0 flex-1 mt-4 md:mt-0 md:ml-8"><a href="/blog/publish-part-2" class="flex cursor-pointer bg-blog-c-preview-page w-full h-full rounded-[10px] p-4 flex-row-reverse items-center min-h-[4.2rem]"><div class="flex-1 flex flex-col leading-none min-w-0 items-end"><p class="text-gray-500 m-0.5">Next Post</p><h3 class="text-black text-2xl font-medium m-0.5">Publish 사용하기 part 2</h3></div></a></div></div><script src="/static/scripts/post.js"></script><script src="https://utteranc.es/client.js" repo="jihoonahn/blog" issue-term="pathname" label="comments" theme="github-light" crossorigin="anonymous" async></script></article></section></main><footer class="bg-blog-c-footer relative"><div class="flex flex-wrap justify-between p-1 mx-auto max-w-4xl"><div class="text-sm mx-3 my-auto p-2"><div><p class="text-stone-600 my-0">Copyright © <a href="https://github.com/jihoonahn" class="text-stone-700">Jihoonahn</a></p></div><div><p class="text-stone-600 my-0">Made with Swift</p></div></div><div class="mx-2"><ul class="inline-flex gap-4 list-none"><li class="text-center w-4 h-4"><a href="https://github.com/jihoonahn"><img src="/static/icons/github.svg" class="w-full h-auto rounded-none"/></a></li><li class="text-center w-4 h-4"><a href="https://www.linkedin.com/in/ahnjihoon/"><img src="/static/icons/linkedin.svg" class="w-full h-auto rounded-none"/></a></li><li class="text-center w-4 h-4"><a href="mailto:jihoonahn.dev@gmail.com"><img src="/static/icons/envelope-solid.svg" class="w-full h-auto rounded-none"/></a></li><li class="text-center w-4 h-4"><a href="https://blog.jihoon.me/feed.rss"><img src="/static/icons/rss-solid.svg" class="w-full h-auto rounded-none"/></a></li></ul></div></div></footer></body></html>