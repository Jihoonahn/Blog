<!DOCTYPE html><html><head lang="ko"><meta charset="UTF-8"/><meta name="og:site_name" content="jihoon.me"/><link rel="canonical" href="https://blog.jihoon.me/blog/tuist-xcodebeta"/><meta name="twitter:url" content="https://blog.jihoon.me/blog/tuist-xcodebeta"/><meta name="og:url" content="https://blog.jihoon.me/blog/tuist-xcodebeta"/><title>Xcode-Beta에서 Tuist 사용기</title><meta name="twitter:title" content="Xcode-Beta에서 Tuist 사용기"/><meta name="og:title" content="Xcode-Beta에서 Tuist 사용기"/><meta name="description" content="Xcode Beta에서 tuist edit 명령어에서 에러나는 부분을 해결하는 방법에 대한 포스트입니다."/><meta name="twitter:description" content="Xcode Beta에서 tuist edit 명령어에서 에러나는 부분을 해결하는 방법에 대한 포스트입니다."/><meta name="og:description" content="Xcode Beta에서 tuist edit 명령어에서 에러나는 부분을 해결하는 방법에 대한 포스트입니다."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to jihoon.me"/></head><body><header id="header" class="fixed top-0 left-0 w-full z-20 bg-blog-c-nav backdrop-saturate-125 backdrop-blur-xl"><div class="pl-6 pr-4"><div class="flex justify-between mx-auto my-0 max-w-3xl"><a href="/" class="flex items-center h-blog-nav"><img src="/static/images/icon.svg" class="max-h-11 my-0"/></a><div class="flex justify-end items-center grow"><div class="flex items-center pl-4"><div id="docsearch" class="blogDocsearch"></div></div><button id="mobileNavButton" aria-label="Mobile navigation" class="cursor-pointer flex w-10 h-blog-nav items-center justify-center group md:hidden"><span class="relative h-4 w-4 overflow-hidden"><span class="transition duration-200 top-0 left-0 absolute w-full h-0.5 bg-blog-c-nav-text ease translate-x-0 translate-y-0 group-[.expanded]:rotate-45 group-[.expanded]:translate-y-0 group-[.expanded]:top-1.5"></span><span class="transition duration-200 top-1.5 left-0 absolute w-full h-0.5 bg-blog-c-nav-text ease translate-x-0 translate-y-0 group-[.expanded]:opacity-0"></span><span class="transition duration-200 top-3 left-0 absolute w-full h-0.5 bg-blog-c-nav-text ease translate-x-0 translate-y-0 group-[.expanded]:-rotate-45 group-[.expanded]:-translate-y-0 group-[.expanded]:top-1.5"></span></span></button></div><nav id="blogNav" class="hidden md:flex"><ul class="flex list-none m-0"><li><a href="/blog" class="blogNavBarMenuLink block py-0 px-3 text-xs leading-calc-blog-nav">Blog</a></li><li><a href="/about" class="blogNavBarMenuLink block py-0 px-3 text-xs leading-calc-blog-nav">About</a></li></ul></nav></div><div id="blogNavScreen" class="hidden h-screen"><div class="my-0 mx-auto max-w-[288px] pt-6 pb-24"><nav class="inline"><ul class="list-none m-0"><li><a href="/blog" class="block py-3 blogNavBarMenuLink border-b border-zinc-500 border-solid">Blog</a></li><li><a href="/about" class="block py-3 blogNavBarMenuLink border-b border-zinc-500 border-solid">About</a></li></ul></nav><div class="mt-4 w-full"><ul class="flex justify-center gap-4 list-none"><li><a href="https://github.com/jihoonahn" class="text-center w-6 h-6"><img src="/static/icons/github.svg" class="w-6 h-6 rounded-none"/></a></li><li><a href="https://www.linkedin.com/in/ahnjihoon/" class="text-center w-6 h-6"><img src="/static/icons/linkedin.svg" class="w-6 h-6 rounded-none"/></a></li><li><a href="mailto:jihoonahn.dev@gmail.com" class="text-center w-6 h-6"><img src="/static/icons/envelope-solid.svg" class="w-6 h-6 rounded-none"/></a></li><li><a href="https://blog.jihoon.me/feed.rss" class="text-center w-6 h-6"><img src="/static/icons/rss-solid.svg" class="w-6 h-6 rounded-none"/></a></li></ul></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script src="/static/scripts/header.js"></script><script type="text/javascript" src="/static/scripts/docsearch.js"></script></header><main id="main" class="relative z-10 flex flex-1 flex-col min-h-screen pt-20 pb-14"><section><article><div><div class="component md:w-[654px]"><div><time class="text-gray-500 text-sm">2023년 06월 10일</time></div></div><div class="component md:w-[654px]"><div><h1 class="m-0 leading-normal font-semibold text-heading-2 md:text-heading-1">Xcode-Beta에서 Tuist 사용기</h1></div></div><div class="component md:w-[654px]"><div class="text-lg md:text-2xl mx-auto">Xcode Beta에서 tuist edit 명령어에서 에러나는 부분을 해결하는 방법에 대한 포스트입니다.</div></div></div><figure class="component rounded-xl border border-gray-200 overflow-hidden min-w-[85%] lg:min-w-[320px]"><div><img src="https://github.com/jihoonahn/blog/assets/68891494/0e65fb0b-e71a-4253-91e0-98067fc522f1" class="my-0"/></div></figure><div class="mx-auto w-[85%] text-left mt-8 md:w-[700px]"><div><h2>Beta를 사용했을때</h2><p>최근에 WWDC23이 공개되었습니다. macOS에서 발표된 내용을 보고 macOS 14와 Xcode 15의 변화에 대해서 보기 위해서, 업데이트를 했습니다.</p><img width="10%" src="https://github.com/jihoonahn/Blog/assets/68891494/9042ff22-337c-459b-b01b-4ab7718c4bcd"></img><p>그렇게 봉인된.. Xcode..</p><p>macOS 14에서는 기존 Xcode 14.3.1(글 작성 기준)를 사용하지 못하게 됩니다. <br/> 그래서 Xcode 15를 설치해야합니다.</p><p><a href="https://xcodereleases.com/">Xcode 설치 링크</a></p><h2>어떤 문제가 있었나..</h2><p>그렇게, Xcode 15를 설치하고 Tuist를 실행 했을 때, 이런 문제가 있더군요. Tuist에서 <code>tuist edit</code> 명령어를 실행했을 때,</p><img width="100%" src="https://github.com/Jihoonahn/Blog/assets/68891494/c22e5b50-273a-45ab-a96e-484d715b014a"></img><p>이런 식으로 실행이 안되는 문제가 있었습니다. <br/> 이유는.. 위에서 빌드업 했지만, 문제는 <a href="https://github.com/tuist/tuist/blob/main/Sources/TuistKit/Services/EditService.swift">Tuist Command Service</a> 부분에 있었습니다. <br/></p><h2>문제는 어디서?</h2><pre><code><span class="keyword">try</span> opener.<span class="call">open</span>(path: workspacePath, application: selectedXcode.<span class="property">path</span>, wait: <span class="keyword">true</span>)
</code></pre><p><a href="https://github.com/tuist/tuist/blob/main/Sources/TuistKit/Services/EditService.swift">tuist &gt; Sources &gt; TuistKit &gt; Services &gt; EditService.swift</a> 의 78번째 줄</p><p>위 코드 부분에서 에러가 발생합니다. <br/></p><p>Xcode 앱을 실행시키는 코드이고, 현재 Xcode는 위 그림처럼 봉인(?)당했기 때문에 Xcode앱을 열 수 없는 것입니다. <br/></p><p>나머지 명령어에서는 문제가 없었지만, <code>tuist edit</code> 명령어에서만 문제가 생기더라고요. <br/> 이 문제에 대한 해결 방법은 없을까요? <br/></p><h2>해결 방법</h2><h3>1. Tuist 명령어만으로 해결하는 방법</h3><img width="100%" src="https://github.com/Jihoonahn/Blog/assets/68891494/cd7a8e9c-59c0-435b-9ff2-bb124bb8d9f8"></img><p><code>tuist edit -h</code>를 실행시켜 명령어를 찾아봅시다.</p><p>Tuist 공식 깃허브 코드에서는 permanent가 true면, Xcode앱을 실행시키지 않습니다.</p><pre><code><span class="keyword">let</span> workspacePath = <span class="keyword">try</span> projectEditor.<span class="call">edit</span>(
    at: path,
    in: path,
    onlyCurrentDirectory: onlyCurrentDirectory,
    plugins: plugins
)
logger.<span class="call">notice</span>(<span class="string">"Xcode project generated at</span> \(workspacePath.<span class="property">pathString</span>)<span class="string">"</span>, metadata: .<span class="dotAccess">success</span>)
</code></pre><p>그렇기 떄문에, <code>tuist edit --permanent</code> 명령어를 실행하면?</p><img width="100%" src="https://github.com/Jihoonahn/Blog/assets/68891494/f71302cb-91ad-4e0c-a665-52dde3574409"></img><p>에러가 발생하여 동작이 실패하지 않고, 아래 처럼 프로젝트와 워크스페이스 파일이 생성됩니다.</p><img width="80%" src="https://github.com/Jihoonahn/Blog/assets/68891494/21ac8d5b-9353-4d04-846f-edaa4103fc0d"></img><p>이런식으로 진행이 됬다면, Manifests.xcworkspace 파일을 눌러서, tuist 프로젝트를 수정할 수 있습니다.</p><h3>2. xcode-select의 path를 변경하는 방법</h3><img width="50%" src="https://github.com/Jihoonahn/Blog/assets/68891494/7c9fb32e-6ea6-4154-99c3-fc4c470ad8f2"></img><p>이 방법은 <a href="https://github.com/baekteun">baekteun</a> 이라는 후배가 영감을 준 방법입니다.</p><p>터미널에서</p><pre><code>sudo xcode-select -s /<span class="type">Applications</span>/<span class="type">Xcode</span>-beta.<span class="property">app</span>/<span class="type">Contents</span>/<span class="type">Developer</span>
</code></pre><p>이렇게 xcode-select에서 path를 변경해 줍니다.</p><p>그 이후 다시 <code>tuist edit</code> 명령어를 실행하면 됩니다.</p><img width="100%" src="https://github.com/Jihoonahn/Blog/assets/68891494/ef3d3550-e18a-4d1b-8d76-2e8017574897"></img><p>그렇게 되면 정상적으로 <code>tuist edit</code> 명령어가 작동합니다. <br/><br/></p><h2>후기</h2><p>처음에 <code>tuist edit</code> 명령어가 작동하지 않아서 tuist의 명령어 코드를 보다가 첫번째 방법은 발견하게 되었고, 두번째 방법은 위에서 말했듯 후배에게 영감을 받아서 얻은 방법입니다.</p><p>Tuist에서 <code>Sources/TuistSupport/Xcode/XcodeController.swift</code> 부분을 보게 되면, <code>xcode-select -p</code> 를 통해서 Xcode의 developer 파일 경로를 받아오는 방식입니다.</p><pre><code><span class="comment">/// Returns the selected Xcode. It uses xcode-select to determine
/// the Xcode that is selected in the environment.
///
/// - Returns: Selected Xcode.
/// - Throws: An error if it can't be obtained.</span>
<span class="keyword">public func</span> selected() <span class="keyword">throws</span> -&gt; <span class="type">Xcode</span>? {
    <span class="comment">// Return cached value if available</span>
    <span class="keyword">if let</span> cached = selectedXcode {
        <span class="keyword">return</span> cached
    }

    <span class="comment">// e.g. /Applications/Xcode.app/Contents/Developer</span>
    <span class="keyword">guard let</span> path = <span class="keyword">try</span>? <span class="type">System</span>.<span class="property">shared</span>.<span class="call">capture</span>([<span class="string">"xcode-select"</span>, <span class="string">"-p"</span>]).<span class="call">spm_chomp</span>() <span class="keyword">else</span> {
        <span class="keyword">return nil</span>
    }

    <span class="keyword">let</span> xcode = <span class="keyword">try</span> <span class="type">Xcode</span>.<span class="call">read</span>(path: <span class="keyword">try</span> <span class="type">AbsolutePath</span>(validating: path).<span class="property">parentDirectory</span>.<span class="property">parentDirectory</span>)
    selectedXcode = xcode
    <span class="keyword">return</span> xcode
}
</code></pre><p>근데 처음에 시도할때는 <code>xcode-select</code> 명령어의 option에서 path를 따로 바꿀 수 있다는 사실을 망각하고 있었기 때문에, 다양한 방식을 찾은 거 같습니다.</p><p>어쨋든 Xcode-beta 또는 다른 버전의 Xcode 앱을 설치하고 <code>tuist edit</code> 명령어가 작동하지 않아서 당황하신 분들을 위해서 이 글을 적었습니다.</p><p>이 방식 외 더 좋은 방식에 대해서 알고 계신 분이 있다면, blog 댓글에 알려주세요.</p></div></div><div class="flex flex-col-reverse px-4 mt-11 mb-4 max-w-3xl mx-auto md:flex-row md:px-0"><div class="min-w-0 flex-1 mt-4 md:mt-0"><a href="/blog/universal-framework" class="flex cursor-pointer rounded-[10px] bg-blog-c-preview-page w-full h-full p-4 min-h-[4.2rem] items-center"><div class="flex-1 flex flex-col leading-none min-w-0 items-start"><p class="text-gray-500 m-0.5">Preview Post</p><h3 class="text-black text-2xl font-medium m-0.5">Universal Framework</h3></div></a></div><div class="min-w-0 flex-1 mt-4 md:mt-0 md:ml-8"><a href="/blog/iga-ios-1" class="flex cursor-pointer bg-blog-c-preview-page w-full h-full rounded-[10px] p-4 flex-row-reverse items-center min-h-[4.2rem]"><div class="flex-1 flex flex-col leading-none min-w-0 items-end"><p class="text-gray-500 m-0.5">Next Post</p><h3 class="text-black text-2xl font-medium m-0.5">제 1회 IGA 발표 회고록</h3></div></a></div></div><script src="https://utteranc.es/client.js" repo="jihoonahn/blog" issue-term="pathname" label="comments" theme="github-light" crossorigin="anonymous" async></script></article></section></main><footer class="bg-blog-c-footer relative"><div class="flex flex-wrap justify-between p-1 mx-auto max-w-4xl"><div class="text-sm mx-3 my-auto p-2"><div><p class="text-stone-600 my-0">Copyright © <a href="https://github.com/jihoonahn" class="text-stone-700">Jihoonahn</a></p></div><div><p class="text-stone-600 my-0">Made with Swift</p></div></div><div class="mx-2"><ul class="inline-flex gap-4 list-none"><li class="text-center w-4 h-4"><a href="https://github.com/jihoonahn"><img src="/static/icons/github.svg" class="w-full h-auto rounded-none"/></a></li><li class="text-center w-4 h-4"><a href="https://www.linkedin.com/in/ahnjihoon/"><img src="/static/icons/linkedin.svg" class="w-full h-auto rounded-none"/></a></li><li class="text-center w-4 h-4"><a href="mailto:jihoonahn.dev@gmail.com"><img src="/static/icons/envelope-solid.svg" class="w-full h-auto rounded-none"/></a></li><li class="text-center w-4 h-4"><a href="https://blog.jihoon.me/feed.rss"><img src="/static/icons/rss-solid.svg" class="w-full h-auto rounded-none"/></a></li></ul></div></div></footer></body></html>